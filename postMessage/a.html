<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>跨域-降域-mother</title>
	<style>
		.ct{
			width: 910px;
			margin: auto;
		}
		.main{
			float: left;
			width: 450px;
			height: 300px;
			border: 1px solid #ccc;
		}
		.main input{
			margin: 20px;
			width: 300px;
		}
		.iframe{
			/*float: right;*/
		}
		iframe{
			width: 450px;
			height: 300px;
			border: 1px dashed #ccc;
		}
	</style>
</head>
<body>
	<div class="ct">
		<h1>使用postMessage实现跨域</h1>
		<div class="main">
			<input type="text" placeholder="http://a.jrg.com:8080/a.html">
		</div>
		<iframe src="http://localhost:8080/b.html" frameborder="0"></iframe>
	</div>

	<script>
		//URL: http://a.jrg.com:8080/a.html
		$('.main input').addEventListener('input', function(){
			console.log("a.main input:" + this.value)
			window.frames[0].postMessage(this.value, '*')
		})

		window.addEventListener('message', function(e){
			$('.main input').value = e.data
			console.log('a.e.data:' + e.data)
		})

		function $(id){
			return document.querySelector(id);
		}
	</script>
</body>
</html>